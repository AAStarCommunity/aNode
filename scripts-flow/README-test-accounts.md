# ğŸ§ª Aã€B æµ‹è¯•è´¦æˆ·é…ç½®æŒ‡å—

## ğŸ“‹ æµ‹è¯•è´¦æˆ·ä¿¡æ¯

### å…±äº«ç§é’¥æ§åˆ¶
æ‰€æœ‰è´¦æˆ·ç”±åŒä¸€ä¸ªç§é’¥æ§åˆ¶ï¼Œç®€åŒ–æµ‹è¯•æµç¨‹ï¼š

```bash
ç§é’¥: 0x2717524c39f8b8ab74c902dc712e590fee36993774119c1e06d31daa4b0fbc81
```

### è´¦æˆ·åœ°å€

| è§’è‰² | åœ°å€ | ç”¨é€” |
|------|------|------|
| **EOA (æ§åˆ¶è€…)** | `0x411BD567E46C0781248dbB6a9211891C032885e5` | æ”¯ä»˜ gas è´¹ç”¨ |
| **è´¦æˆ· A (å‘é€æ–¹)** | `0x7D7a0D3239285faE78F9c364D81bb1E3bc555BC6` | PNT ä»£å¸å‘é€æ–¹ |
| **è´¦æˆ· B (æ¥æ”¶æ–¹)** | `0x27243FAc2c0bEf46F143a705708dC4A7eD476854` | PNT ä»£å¸æ¥æ”¶æ–¹ |

## ğŸ’° èµ„é‡‘éœ€æ±‚

### 1. EOA åœ°å€ (ç”¨äº gas è´¹ç”¨)
```
åœ°å€: 0x411BD567E46C0781248dbB6a9211891C032885e5
éœ€è¦: 0.05 ETH (Sepolia æµ‹è¯•ç½‘)
ç”¨é€”: æ”¯ä»˜ UserOperation çš„ gas è´¹ç”¨
```

### 2. SimpleAccount A (å‘é€æ–¹)
```
åœ°å€: 0x7D7a0D3239285faE78F9c364D81bb1E3bc555BC6
éœ€è¦: 100 PNT ä»£å¸
ç”¨é€”: æµ‹è¯•è½¬è´¦çš„å‘é€æ–¹
```

### 3. SimpleAccount B (æ¥æ”¶æ–¹)
```
åœ°å€: 0x27243FAc2c0bEf46F143a705708dC4A7eD476854
éœ€è¦: 0 PNT (åˆå§‹ä¸ºç©ºï¼Œæ¥æ”¶è½¬è´¦)
ç”¨é€”: æµ‹è¯•è½¬è´¦çš„æ¥æ”¶æ–¹
```

## ğŸš° è·å–æµ‹è¯•èµ„é‡‘

### ETH (Sepolia æµ‹è¯•ç½‘)
- **Sepolia Faucet**: https://sepoliafaucet.com/
- **Alchemy Faucet**: https://sepoliafaucets.alchemy.com/sepolia
- **å‘é€åˆ°**: `0x411BD567E46C0781248dbB6a9211891C032885e5`

### PNT ä»£å¸
- **åˆçº¦åœ°å€**: `0x3e7B771d4541eC85c8137e950598Ac97553a337a`
- **å‘é€åˆ°**: `0x7D7a0D3239285faE78F9c364D81bb1E3bc555BC6` (SimpleAccount A)

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æ›´æ–°é…ç½®
ç¡®ä¿ `.env` æ–‡ä»¶åŒ…å«æ­£ç¡®é…ç½®ï¼š

```bash
# Test accounts controlled by same private key
PRIVATE_KEY="0x2717524c39f8b8ab74c902dc712e590fee36993774119c1e06d31daa4b0fbc81"
PRIVATE_KEY_A="0x2717524c39f8b8ab74c902dc712e590fee36993774119c1e06d31daa4b0fbc81"
PRIVATE_KEY_B="0x2717524c39f8b8ab74c902dc712e590fee36993774119c1e06d31daa4b0fbc81"

# EOA Address (owner of both SimpleAccounts)
EOA_ADDRESS="0x411BD567E46C0781248dbB6a9211891C032885e5"

# SimpleAccount addresses
SIMPLE_ACCOUNT_A="0x7D7a0D3239285faE78F9c364D81bb1E3bc555BC6"
SIMPLE_ACCOUNT_B="0x27243FAc2c0bEf46F143a705708dC4A7eD476854"
```

### 2. å­˜å…¥æµ‹è¯•èµ„é‡‘
1. å‘ EOA å‘é€ 0.05 ETH
2. å‘ SimpleAccount A å‘é€ 100 PNT

### 3. æ£€æŸ¥ä½™é¢
```bash
node checkBalance.js
```

### 4. è¿è¡Œè½¬è´¦æµ‹è¯•
```bash
# è½¬è´¦ 10 PNT ä» A åˆ° B
npm run test:ab 10

# æˆ–è€…ç›´æ¥è¿è¡Œ
node src/testABTransfer.js 10
```

## ğŸ”§ æŠ€æœ¯è¯´æ˜

### preVerificationGas = 44844 çš„åŸå› 
ERC-4337 EntryPoint v0.6 è¦æ±‚ preVerificationGas æœ€å°‘ä¸º 44844ï¼ŒåŒ…æ‹¬ï¼š
- **Bundler å¤„ç†å¼€é”€**: è§£æã€éªŒè¯ UserOperation ç»“æ„
- **å†…å­˜æ± æ“ä½œ**: å­˜å‚¨å’Œç®¡ç† UserOperation
- **ç½‘ç»œä¼ è¾“**: RPC è°ƒç”¨å’Œæ•°æ®ä¼ è¾“æˆæœ¬
- **ç­¾åéªŒè¯é¢„å¤„ç†**: EntryPoint éªŒè¯å‰çš„åˆæ­¥æ£€æŸ¥

### SimpleAccount éƒ¨ç½²
- å¦‚æœ SimpleAccount æœªéƒ¨ç½²ï¼Œé¦–æ¬¡äº¤æ˜“ä¼šè‡ªåŠ¨éƒ¨ç½²
- ä½¿ç”¨ SimpleAccountFactory çš„ `getAddress()` è®¡ç®—ç¡®å®šæ€§åœ°å€
- è´¦æˆ· A ä½¿ç”¨ salt = 0ï¼Œè´¦æˆ· B ä½¿ç”¨ salt = 1

## ğŸ“Š é¢„æœŸç»“æœ

æˆåŠŸçš„è½¬è´¦æµ‹è¯•åº”è¯¥æ˜¾ç¤ºï¼š
```
ğŸ¯ è½¬è´¦éªŒè¯: âœ… æˆåŠŸ
ğŸ“ˆ ä½™é¢å˜åŒ–:
è´¦æˆ· A å‡å°‘: 10.0 PNT
è´¦æˆ· B å¢åŠ : 10.0 PNT
```

## ğŸ› å¸¸è§é—®é¢˜

### AA23 ç­¾åéªŒè¯é”™è¯¯
- **åŸå› **: ç§é’¥ä¸ SimpleAccount owner ä¸åŒ¹é…
- **è§£å†³**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç§é’¥é…ç½®

### InsufficientFees é”™è¯¯
- **åŸå› **: gas ä»·æ ¼è¿‡ä½
- **è§£å†³**: å·²åœ¨ fly.toml ä¸­ä¼˜åŒ– gas é…ç½®

### ä½™é¢ä¸è¶³
- **åŸå› **: è´¦æˆ·æ²¡æœ‰è¶³å¤Ÿçš„ ETH æˆ– PNT
- **è§£å†³**: æŒ‰ç…§èµ„é‡‘éœ€æ±‚ç« èŠ‚å­˜å…¥æµ‹è¯•èµ„é‡‘

---

ç”Ÿæˆæ—¶é—´: 2025-09-21
çŠ¶æ€: ç­‰å¾…ç”¨æˆ·å­˜å…¥æµ‹è¯•èµ„é‡‘åè¿›è¡Œæµ‹è¯•